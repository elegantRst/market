import{d as h,u as m,b as j,bv as N,j as t,L as p,bw as v,bx as g,by as C,$ as b,bz as S}from"./index-TJ6Z515T.js";import{f as e}from"./formatNumbers-DT4AwJLE.js";import{a as I}from"./normalizeWordsForm-COjRfoeh.js";const y="_cart_1td92_1",P="_cart__inner_1td92_7",k="_cart__left_1td92_12",w="_cart__title_1td92_16",F="_cart__items_1td92_33",O="_cart__item_1td92_33",A="_cart__item_image_1td92_48",J="_cart__item_info_1td92_61",L="_cart__item_name_1td92_66",T="_cart__item_total_1td92_79",$="_cart__item_totalsaleprice_1td92_86",z="_cart__item_totalprice_1td92_91",D="_cart__item_priceforone_1td92_98",B="_cart__right_1td92_105",E="_cart__results_1td92_111",G="_cart__profit_1td92_116",M="_cart__profit_text_1td92_123",R="_cart__profit_price_1td92_128",U="_cart__profit_profitprice_1td92_135",q="_cart__result_1td92_111",H="_cart__result_text_1td92_150",K="_cart__result_price_1td92_156",Q="_cart__orderbtn_1td92_163",V="_cart__clearbtn_1td92_180",W="_cart__item_calcbox_1td92_199",X="_profile_cartbox_1td92_204",r={cart:y,cart__inner:P,cart__left:k,cart__title:w,cart__items:F,cart__item:O,cart__item_image:A,cart__item_info:J,cart__item_name:L,cart__item_total:T,cart__item_totalsaleprice:$,cart__item_totalprice:z,cart__item_priceforone:D,cart__right:B,cart__results:E,cart__profit:G,cart__profit_text:M,cart__profit_price:R,cart__profit_profitprice:U,cart__result:q,cart__result_text:H,cart__result_price:K,cart__orderbtn:Q,cart__clearbtn:V,cart__item_calcbox:W,profile_cartbox:X},rt=()=>{const i=h(),{isLogged:x}=m(j),{productsInCart:o}=m(N),l=()=>{const _=localStorage.getItem("cart");if(!_)return 0;try{return JSON.parse(_).reduce((s,a)=>s+a.count,0)}catch(c){return console.error("Failed to parse cart from localStorage",c),0}},n=()=>{const _=localStorage.getItem("cart");if(!_)return 0;try{return JSON.parse(_).reduce((s,a)=>s+a.price*a.count,0)}catch(c){return console.error("Failed to parse cart from localStorage",c),0}},d=()=>{const _=localStorage.getItem("cart");if(!_)return 0;try{return JSON.parse(_).reduce((s,a)=>s+a.salePrice*a.count,0)}catch(c){return console.error("Failed to parse cart from localStorage",c),0}},f=()=>{i(S(!0))},u=async()=>{localStorage.removeItem("cart"),await i(C()),await i(b())};return t.jsx(t.Fragment,{children:t.jsx("div",{className:r.cart,children:o.length>0?t.jsxs("div",{className:r.cart__inner,children:[t.jsxs("div",{className:r.cart__left,children:[t.jsx("div",{className:r.cart__title,children:"Корзина"}),t.jsx("div",{className:r.cart__clearbtn,onClick:()=>u(),children:"Очистить корзину"}),t.jsx("div",{className:r.cart__items,children:o.map((_,c)=>t.jsxs("div",{className:r.cart__item,children:[t.jsx(p,{className:r.cart__item_image,to:`/product/${_.productId}`,children:t.jsx("img",{src:window.location.origin+_.imageUrl,alt:"alt"})}),t.jsxs("div",{className:r.cart__item_info,children:[t.jsx(p,{className:r.cart__item_name,to:`/product/${_.productId}`,children:_.name}),t.jsxs("div",{className:r.cart__item_calcbox,children:[t.jsx(v,{item:_}),t.jsx(g,{item:_})]})]}),t.jsxs("div",{className:r.cart__item_total,children:[t.jsxs("div",{className:r.cart__item_totalsaleprice,children:[e(_.currentTotalSalePrice)," ₽"]}),t.jsxs("div",{className:r.cart__item_totalprice,children:[e(_.currentTotalPrice)," ₽"]}),t.jsxs("div",{className:r.cart__item_priceforone,children:[e(_.salePrice)," ₽ за 1 шт"]})]})]},c))})]}),t.jsxs("div",{className:r.cart__right,children:[t.jsx("div",{className:r.cart__title,children:"Общая стоимость"}),t.jsxs("div",{className:r.cart__results,children:[t.jsxs("div",{className:r.cart__profit,children:[t.jsxs("div",{className:r.cart__profit_text,children:[l(),I(l())]}),t.jsxs("div",{className:r.cart__profit_price,children:[e(n())," ₽"]})]}),t.jsxs("div",{className:r.cart__profit,children:[t.jsx("div",{className:r.cart__profit_text,children:"Скидка"}),t.jsxs("div",{className:r.cart__profit_profitprice,children:[e(n()-d())," ₽"]})]}),t.jsxs("div",{className:r.cart__result,children:[t.jsx("div",{className:r.cart__result_text,children:"Итого"}),t.jsxs("div",{className:r.cart__result_price,children:[e(d()),"₽"]})]}),t.jsx("div",{className:r.cart__orderbtn,onClick:()=>f(),children:"Оформить"})]})]})]}):t.jsx("div",{className:r.cart__inner,children:t.jsxs("div",{className:r.cart__left,children:[t.jsx("div",{className:r.cart__title,children:"Корзина"}),t.jsx("div",{className:r.cart__items,children:x?t.jsx("p",{children:"У вас нет добавленных в корзину товаров!"}):t.jsx("p",{children:"Войдите в ваш аккаунт для добавления товаров в корзину"})})]})})})})};export{rt as C,r as s};
